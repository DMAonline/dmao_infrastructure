calling 'gsub' on bad self (string expected, got table)